

<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Heart Disease Predictor</title>
  <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">
  <script src="https://kit.fontawesome.com/5f3f547070.js" crossorigin="anonymous"></script>
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
</head>

<body>

  <!-- Website Title -->

  <div class="container">
    <h2 class='container-heading'><span class="heading_font">Heart Disease Predictor</span></h2>
    <div class='description'>
      <p>A Machine Learning Web Application that predicts chances of having heart Disease or not</p><br>
      <p>(Note: This model is 98% accurate)</p>
    </div>
  </div>

  <!-- Form Container -->
  <div class="ml-container">
    <form action="{{ url_for('predict')}}" method="POST"> 

      <label for="age">Age</label>
      <input type="text" id="age" name="age" placeholder="Enter your age"><br>

      <label for="sex">Sex</label>
      <select id="sex" name="sex">
        <option selected>choose option</option>
        <option value="1">Male</option>
        <option value="0">Female</option>
      </select><br>

      <label for="cp">Chest Pain Type</label>
      <select id="cp" name="cp">
        <option selected>choose option</option>
        <option value="0">Typical Angina</option>
        <option value="1">Atypical Angina</option>
        <option value="2">Non-anginal Pain</option>
        <option value="3">Asymptomatic</option>
      </select><br>

      <label for="trestbps">Resting Blood Pressure</label>
      <input type="text" id="trestbps" name="trestbps" placeholder="Enter number in range [94-200] mmHg"><br>

      <label for="chol">Serum Cholesterol</label>
      <input type="text" id="chol" name="chol" placeholder="Enter number in range [126-564] mg/dl"><br>

      <label for="fbs">Fasting Blood Sugar</label>
      <select id="fbs" name="fbs">
        <option selected>Choose option</option>
        <option value="1">Greater than 120 mg/dl</option>
        <option value="0">Less than 120 mg/dl</option>
      </select><br>

      <label for="restecg">Resting ECG Results</label>
      <select id="restecg" name="restecg">
        <option selected>Choose option</option>
        <option value="0">Normal</option>
        <option value="1">Having ST-T wave abnormality</option>
        <option value="2">Probable or definite left ventricular hypertrophy</option>
      </select><br>

      <label for="thalach">Max Heart Rate</label>
      <input type="text" id="thalach" name="thalach" placeholder="Enter number in range [71-202] bpm"><br>

      <label for="exang">Exercise-induced Angina</label>
      <select id="exang" name="exang">
        <option selected>choose option</option>
        <option value="1">Yes</option>
        <option value="0">No</option>
      </select><br>

      <label for="oldpeak">ST depression</label>
      <input type="text" id="oldpeak" name="oldpeak" placeholder="ST depression, typically in [0-6.2]"><br>

      <label for="slope">Slope of the peak exercise ST segment</label>
      <select id="slope" name="slope">
        <option selected>choose option</option>
        <option value="0">Upsloping</option>
        <option value="1">Flat</option>
        <option value="2">Downsloping</option>
      </select><br>

      <label for="ca">Number of Major vessels</label>
      <input type="text" id="ca" name="ca" placeholder="Typically in [0-4]"><br>

      <label for="thal">Thalassemia</label> 
      <select id="thal" name="thal">
        <option selected>choose option</option>
        <option value="0">Normal</option>
        <option value="1">Fixed Defect</option> 
        <option value="2">Reversible Defect</option>  
      </select><br>

      <input type="submit" class="my-cta-button" value="Predict">
    </form>

    <!-- Error messages will show up here -->
    <div id="form-errors" style="color:red; margin-top: 15px;"></div>

  </div>

  <script>
    document.querySelector('form').addEventListener('submit', function(event) {
      // Clear previous error messages
      const errorDiv = document.querySelector('#form-errors');
      errorDiv.innerHTML = '';

      let errors = [];

      function validateField(id, name, type, min = null, max = null) {
        const field = document.getElementById(id);
        const val = field.value.trim();

        if (!val) {
          errors.push(`${name} is required.`);
          return;
        }

        if (type === 'int') {
          const intVal = parseInt(val);
          if (isNaN(intVal) || (min !== null && intVal < min) || (max !== null && intVal > max)) {
            errors.push(`Please enter a valid ${name} between ${min} and ${max}.`);
          }
        } else if (type === 'float') {
          const floatVal = parseFloat(val);
          if (isNaN(floatVal) || (min !== null && floatVal < min) || (max !== null && floatVal > max)) {
            errors.push(`Please enter a valid ${name} between ${min} and ${max}.`);
          }
        } else if (type === 'select') {
          if (val === 'choose option' || val === 'Choose option') {
            errors.push(`Please select a valid option for ${name}.`);
          }
        }
      }

      validateField('age', 'Age', 'int', 1, 120);
      validateField('sex', 'Sex', 'select');
      validateField('cp', 'Chest Pain Type', 'select');
      validateField('trestbps', 'Resting Blood Pressure', 'int', 94, 200);
      validateField('chol', 'Serum Cholesterol', 'int', 126, 564);
      validateField('fbs', 'Fasting Blood Sugar', 'select');
      validateField('restecg', 'Resting ECG Results', 'select');
      validateField('thalach', 'Max Heart Rate', 'int', 71, 202);
      validateField('exang', 'Exercise-induced Angina', 'select');
      validateField('oldpeak', 'ST depression', 'float', 0, 6.2);
      validateField('slope', 'Slope of peak exercise ST segment', 'select');
      validateField('ca', 'Number of Major vessels', 'int', 0, 4);
      validateField('thal', 'Thalassemia', 'select');

      if (errors.length > 0) {
        event.preventDefault();
        let errorHtml = '<ul>';
        errors.forEach(err => {
          errorHtml += `<li>${err}</li>`;
        });
        errorHtml += '</ul>';
        errorDiv.innerHTML = errorHtml;
      }
    });
  </script>

</body>

</html>
